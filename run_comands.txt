# create data set dirichlet
# classes -> number of classes that a client's data can belong to
# emnist_split -> only used for emnist dataset
# type -> not sure what it's for
# client_num_in_each_pickles -> not sure what it's for
# alpha -> for controling data hetero degree while performing Dirichlet partition
# num_classes_dataset-> number of categories in the entire dataset
# client_num_in_each_pickles -> number of clients in each pickle file, could be 1 or more per file


Data Preparation

For NIID - 1, 2, 5 e.t.c partitioning, like in fedshare
    1. set dirichlet factor (alpha) to 0
    2. set classes (number of labels per client) to the NIID value e.g 1
    3. set the client_num_in_total to the total number clients required
    4. set fraction to the number clients per round. Should always be set to 1. The real fraction is set in training as C
    5. set num_classes_dataset to the number of classes in the dataset
    6. iid-client-100 - directory to save the dataset
    5. example:

        python ./data/utils/run.py\
         --dataset cifar10\
         --alpha 0\
         --distribution niid-1-client-10\
         --client_num_in_total 10\
         --fraction 1\
         --classes 1\
         --seed 17\
         --emnist_split byclass\
         --type user\
         --client_num_in_each_pickles 10\
         --root ../../dataset/fl-datasets-test\
         --num_classes_dataset 10 

For Dirichlet partitioning, like in other papers
    1. set alpha to the degree of heterogeneity, 1 is the most extreme
    2. set classes (number of labels per client) to -1
    3. example:
        python ./data/utils/run.py\
         --dataset cifar10\
         --alpha 1\
         --client_num_in_total 10\
         --fraction 1\
         --classes -1\
         --seed 14\
         --emnist_split byclass\
         --type user\
         --client_num_in_each_pickles 10\
         --root ../../dataset/fl_datasets\
         --num_classes_dataset 10


Model Training
nohup python ./src/server/fedavg.py --config cifar10 --device 5 --exp_name fedavg &
nohup python ./src/server/unbiased_update.py --config cifar10 --device 5 --exp_name unbiased_update &
nohup python ./src/server/fedprox.py --config cifar10 --device 5 --exp_name fedprox &
nohup python ./src/server/fedavg.py --config cifar10 --device 2 --exp_name hyperparam_tunning &

